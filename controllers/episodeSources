import * as gogoScraper from '../scrapers/gogoAnime.js';
import * as nineScraper from '../scrapers/nineAnime.js';
import * as paheScraper from '../scrapers/animePahe.js';

export const getEpisodeSources = async (req, res) => {
  try {
    const { source, slug, episodeNumber } = req.params;
    let sources;
    if (source === 'gogoanime') {
      sources = await gogoScraper.getEpisodeSources(slug, episodeNumber);
    } else if (source === '9anime') {
      sources = await nineScraper.getEpisodeSources(slug, episodeNumber);
    } else if (source === 'animepahe') {
      sources = await paheScraper.getEpisodeSources(slug, episodeNumber);
    } else {
      return res.status(400).json({ message: 'Invalid source' });
    }
    res.json(sources);
  } catch (error) {
    res.status(500).json({ message: 'Error fetching episode sources', error });
  }
};
